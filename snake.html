<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chaos v Rytme â€“ Punk z Martina</title>

  <link rel="icon" href="logo.jpg" type="image/jpeg" />
  <link rel="stylesheet" href="style.css" />

  <style>
    #snake-page {
      padding: 32px 16px 48px;
      color: #39ff14;
      text-align: center;
    }

    #snake-page h1 {
      margin: 6px 0 16px;
      font-size: 28px;
      color: #39ff14;
      text-shadow: 0 0 12px #39ff14;
    }

    #snake-menu {
      margin: 10px auto 18px;
      display: grid;
      gap: 10px 18px;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      max-width: 920px;
    }
    #snake-menu label {
      display: block;
      font-size: 16px;
      margin-bottom: 6px;
      color: #ff00ea;
      text-shadow: 0 0 10px #ff00ea;
    }
    #snake-menu .neon-select {
      width: 100%;
      padding: 10px 12px;
      font-size: 16px;
      border-radius: 10px;
      background: #111;
      color: #39ff14;
      border: 2px solid #39ff14;
      text-shadow: 0 0 8px #39ff14;
      outline: none;
    }
    #snake-menu .neon-btn {
      background: #e6007e;
      padding: 12px 22px;
      border: none;
      color: white;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
      text-shadow: 0 0 10px #fff;
      box-shadow: 0 0 20px #e6007e;
      transition: box-shadow .2s ease;
      width: 100%;
    }
    #snake-menu .neon-btn:hover {
      box-shadow: 0 0 40px #ff00c8;
    }

    #score {
      font-size: 20px;
      margin: 10px 0 10px;
      text-shadow: 0 0 10px #39ff14;
    }

    #gameContainer {
      margin: 0 auto;
      display: none;
    }

    #gameCanvas {
      background: #000;
      border: 4px solid #39ff14;
      box-shadow: 0 0 25px #ff009d, inset 0 0 50px #9400ff;
      width: min(92vw, 560px);
      height: auto;
      touch-action: none;
      border-radius: 8px;
    }

    .hint {
      margin-top: 8px;
      font-size: 14px;
      color: #bbb;
    }

    @keyframes glitch {
      0% { filter: hue-rotate(0deg); }
      50% { filter: hue-rotate(90deg) blur(2px); transform: scale(1.03); }
      100% { filter: hue-rotate(0deg); }
    }

    body.no-scroll {
      overflow: hidden;
      height: 100vh;
    }
  </style>
</head>

<body>

<header class="site-header">
  <div class="header-content">
    <div class="brand-row">
      <a href="index.html" class="logo-link">
        <img src="logo.jpg" alt="Logo" class="logo-img">
      </a>

      <button class="hamburger" id="hamburger">
        <span></span><span></span><span></span>
      </button>

      <nav class="main-nav" id="main-nav">
        <a href="index.html">Domov</a>
        <a href="index.html#okapele">O kapele</a>
        <a href="clenovia.html">ÄŒlenovia</a>
        <a href="hudba.html">Hudba</a>
        <a href="index.html#koncerty">Koncerty</a>
        <a href="snake.html" aria-current="page">Snake</a>
        <a href="index.html#kontakt">Kontakt</a>
      </nav>
    </div>
  </div>
</header>

<main>
  <section id="snake-page">
    <h1>CHAOS v RYTME â€“ NEON SNAKE</h1>

    <div id="snake-menu">
      <div>
        <label for="mapSelect">Mapa</label>
        <select id="mapSelect" class="neon-select">
          <option value="classic">Classic Grid</option>
          <option value="neon">Neon Overdrive</option>
          <option value="dark">Dark Void</option>
        </select>
      </div>

      <div>
        <label for="speedSelect">RÃ½chlosÅ¥</label>
        <select id="speedSelect" class="neon-select">
          <option value="120">PomalÃ¡</option>
          <option value="80" selected>NormÃ¡l</option>
          <option value="50">RÃ½chla</option>
        </select>
      </div>

      <div>
        <label for="gridSelect">MrieÅ¾ka</label>
        <select id="gridSelect" class="neon-select">
          <option value="20">20Ã—20</option>
          <option value="25" selected>25Ã—25</option>
          <option value="30">30Ã—30</option>
        </select>
      </div>

      <div>
        <label style="visibility:hidden;">.</label>
        <button id="startBtn" class="neon-btn">SpustiÅ¥ hru</button>
      </div>
    </div>

    <div id="gameContainer">
      <div id="score">SkÃ³re: 0</div>
      <canvas id="gameCanvas"></canvas>
      <p class="hint">OvlÃ¡danie: Å¡Ã­pky â€¢ swipe na mobile</p>
    </div>
  </section>
</main>

<footer>
  <div class="footer-inner">
    <p>Â© 2026 Chaos v Rytme â€“ Punk z Martina</p>
    <div class="social-links">
      <a href="https://www.tiktok.com/@chaosvrytme"><img src="path1.svg"></a>
      <a href="https://instagram.com/chaosvrytme">(instagram svg)</a>
      <a href="https://bandzone.cz/chaosvrytme">(bandzone svg)</a>
    </div>
  </div>
</footer>

<script>
/* HAMBURGER */
const hamburger = document.getElementById("hamburger");
const nav = document.getElementById("main-nav");
hamburger.onclick = () => {
  hamburger.classList.toggle("active");
  nav.classList.toggle("active");
};

/* SNAKE GAME */
let canvas, ctx;
let snake, food;
let vx = 0, vy = 0;
let gridSize = 25;
let tileSize;
let score = 0;
let speed = 80;
let gameLoop;
let movementStarted = false;
let gameActive = false;

// novÃ½ stav
let scrollLocked = false;

const startBtn = document.getElementById("startBtn");
const gameWrap = document.getElementById("gameContainer");
const scoreBox = document.getElementById("score");
const mapSelect = document.getElementById("mapSelect");
const speedSelect = document.getElementById("speedSelect");
const gridSelect = document.getElementById("gridSelect");

startBtn.onclick = startGame;

function startGame() {
  gameWrap.style.display = "block";

  gridSize = parseInt(gridSelect.value);
  speed = parseInt(speedSelect.value);

  canvas = document.getElementById("gameCanvas");
  canvas.width = 560;
  canvas.height = 560;
  ctx = canvas.getContext("2d");

  tileSize = canvas.width / gridSize;

  resetGame();

  if (gameLoop) clearInterval(gameLoop);
  gameLoop = setInterval(update, speed);

  gameActive = true;
  scrollLocked = false;
}

function resetGame() {
  const mid = Math.floor(gridSize / 2);
  snake = [{ x: mid, y: mid }];
  vx = 0;
  vy = 0;
  movementStarted = false;
  score = 0;
  updateScore();
  spawnFood();
  draw();
}

function spawnFood() {
  food = {
    x: Math.floor(Math.random() * gridSize),
    y: Math.floor(Math.random() * gridSize)
  };
}

function updateScore() {
  scoreBox.textContent = "SkÃ³re: " + score;
}

/* OVLÃDANIE KLÃVES */
document.addEventListener("keydown", (e) => {
  if (!gameActive) return;

  // ESC
  if (e.key === "Escape") {
    quitGame();
    return;
  }

  // pri PRVEJ Å¡Ã­pke
  if (!scrollLocked && ["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)) {
    scrollLocked = true;
    document.body.classList.add("no-scroll");
    e.preventDefault();
  }

  if (e.key === "ArrowUp" && vy !== 1)  { vx = 0; vy = -1; movementStarted = true; }
  if (e.key === "ArrowDown" && vy !== -1){ vx = 0; vy = 1;  movementStarted = true; }
  if (e.key === "ArrowLeft" && vx !== 1) { vx = -1;vy = 0;  movementStarted = true; }
  if (e.key === "ArrowRight"&& vx !==-1){ vx = 1; vy = 0;  movementStarted = true; }
});

/* blokovanie scrollovania Å¡Ã­pkami */
window.addEventListener("keydown", (e) => {
  if (!scrollLocked) return;

  if (["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)) {
    e.preventDefault();
  }
},{ passive:false });

/* UPDATE */
function update() {
  if (!movementStarted) {
    draw();
    return;
  }

  const head = { x: snake[0].x + vx, y: snake[0].y + vy };

  // steny
  if (head.x < 0 || head.x >= gridSize || head.y < 0 || head.y >= gridSize) {
    gameOver();
    return;
  }

  // seba kolÃ­zia
  if (snake.some(p => p.x === head.x && p.y === head.y)) {
    gameOver();
    return;
  }

  snake.unshift(head);

  if (head.x === food.x && head.y === food.y) {
    score++;
    updateScore();
    spawnFood();
  } else {
    snake.pop();
  }

  draw();
}

/* DRAW */
function draw() {
  ctx.fillStyle = "#000";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // food
  ctx.fillStyle = "#ff00ea";
  ctx.shadowColor = "#ff00ea";
  ctx.shadowBlur = 22;
  ctx.fillRect(food.x * tileSize, food.y * tileSize, tileSize, tileSize);

  // snake
  ctx.fillStyle = "#39ff14";
  ctx.shadowColor = "#39ff14";
  ctx.shadowBlur = 18;
  for (const p of snake) {
    ctx.fillRect(p.x * tileSize, p.y * tileSize, tileSize, tileSize);
  }
  ctx.shadowBlur = 0;
}

/* GAME OVER */
function gameOver() {
  clearInterval(gameLoop);
  canvas.style.animation = "glitch 0.45s";

  setTimeout(() => {
    document.body.classList.remove("no-scroll");
    scrollLocked = false;
    gameActive = false;

    alert("GAME OVER ðŸ’€  |  SkÃ³re: " + score);
    location.reload();
  }, 420);
}

/* ESC QUIT */
function quitGame() {
  clearInterval(gameLoop);
  document.body.classList.remove("no-scroll");
  scrollLocked = false;
  gameActive = false;
  alert("Hra ukonÄenÃ¡.");
  location.reload();
}
    // === HIDE NAV ON SCROLL DOWN, SHOW ON SCROLL UP ===
let lastScroll = 0;
const header = document.querySelector('.site-header');

window.addEventListener('scroll', () => {
    let current = window.scrollY;

    if (current > lastScroll && current > 80) {
        // scrollujem dole
        header.classList.add('hide-header');
    } else {
        // scrollujem hore
        header.classList.remove('hide-header');
    }
    lastScroll = current;
});
// ----- FIX: umoÅ¾nÃ­ spustiÅ¥ hru na mobile -----
startBtn.addEventListener("touchstart", (e) => {
  e.preventDefault();
  startGame();
}, { passive: false });

// ----- FIX: prvÃ½ dotyk na canvas spustÃ­ movement -----
document.addEventListener("touchstart", (e) => {
  const canvas = document.getElementById("gameCanvas");
  if (!canvas) return;

  if (!movementStarted && gameActive) {
    movementStarted = true;
    vx = 1;
    vy = 0;

    if (!scrollLocked) {
      scrollLocked = true;
      document.body.classList.add("no-scroll");
    }
  }
}, { passive: false });
</script>

</body>
</html>